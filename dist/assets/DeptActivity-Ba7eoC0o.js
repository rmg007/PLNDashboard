import{u as N,r as i,j as r,e as $,f as M}from"./index-6DsH3j6U.js";import{u as S,c as W,C as k,R as V,F as Y,a as R,b as U,d as B,e as E,M as z}from"./MultiSelectDropdown-DoJDWq2O.js";import"./plotly.min-D1u5EAZ6.js";const w=W();function _({data:c,isLoading:v}){const{setTitle:g}=N(),[a,C]=i.useState([]),[u,L]=i.useState(!0),o=["rgb(14, 50, 148)","rgb(122, 125, 129)","rgb(5, 100, 5)","rgb(37, 44, 51)","rgb(7, 104, 143)","rgb(49, 136, 133)","rgb(95, 158, 160)","rgb(70, 130, 180)","rgb(100, 149, 237)","rgb(176, 224, 230)","rgb(7, 75, 77)","rgb(34, 88, 86)"];i.useEffect(()=>(S("PSCActivityReport",g),()=>g("My Dashboard")),[g]),i.useEffect(()=>{(async()=>{try{const t=await fetch("./data/UniquePermitsAnalysisData/DeptAnnualActivityWeekdayJson.json");if(!t.ok)throw new Error("Failed to fetch weekday data");const n=(await t.json()).filter(l=>l.department==="PSC");C(n)}catch(t){console.error("Error fetching weekday data:",t)}finally{L(!1)}})()},[]);const P=i.useMemo(()=>[{header:()=>r.jsx("div",{className:"text-center",children:"Year"}),accessorKey:"year",id:"year",sortingFn:"basic",cell:e=>r.jsx("div",{className:"text-center",children:e.getValue()})},{header:()=>r.jsx("div",{className:"text-center",children:"Activity Count"}),accessorKey:"activity_count",id:"activity_count",sortingFn:"basic",cell:e=>r.jsx("div",{className:"text-center",children:e.getValue().toLocaleString()})}],[]),m=i.useMemo(()=>[w.accessor("year",{header:"Fiscal Year",cell:e=>e.getValue()}),w.accessor("monday",{header:"Monday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("tuesday",{header:"Tuesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("wednesday",{header:"Wednesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("thursday",{header:"Thursday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("friday",{header:"Friday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`})],[]),T=i.useMemo(()=>{if(!c||!Array.isArray(c)||c.length===0)return[];const e=[...c].sort((t,s)=>t.year-s.year);return[{x:e.map(t=>t.year),y:e.map(t=>t.activity_count),type:"bar",name:"PSC Activity",marker:{color:o[0]},text:e.map(t=>t.activity_count.toLocaleString()),textposition:"inside",insidetextanchor:"middle",textfont:{color:"white",size:12},hovertemplate:"<b>Year: %{x}</b><br>Activity Count: %{y:,}<extra></extra>"}]},[c,o]),b=i.useMemo(()=>{if(!a||!Array.isArray(a)||a.length===0)return[];const e=[...a].sort((n,l)=>n.year-l.year),t=["monday","tuesday","wednesday","thursday","friday"],s=["Mon","Tue","Wed","Thu","Fri"];return t.map((n,l)=>({x:e.map(y=>y.year),y:e.map(y=>y[n]),type:"bar",name:s[l],marker:{color:o[l%o.length]},text:e.map(y=>`${(y[n]*100).toFixed(1)}%`),textposition:"inside",insidetextanchor:"middle",textangle:-90,textfont:{size:10,color:"white"},hovertemplate:"<b>Year: %{x}</b><br>"+s[l]+": %{text}<extra></extra>"}))},[a,o]),F=i.useMemo(()=>!a||!Array.isArray(a)||a.length===0?[]:[...a].sort((t,s)=>t.year-s.year).map((t,s)=>({x:["Mon","Tue","Wed","Thu","Fri"],y:[t.monday,t.tuesday,t.wednesday,t.thursday,t.friday],type:"bar",name:`${t.year}`,marker:{color:o[s%o.length]},text:[`${(t.monday*100).toFixed(1)}%`,`${(t.tuesday*100).toFixed(1)}%`,`${(t.wednesday*100).toFixed(1)}%`,`${(t.thursday*100).toFixed(1)}%`,`${(t.friday*100).toFixed(1)}%`],textposition:"inside",insidetextanchor:"middle",textangle:-90,textfont:{size:10,color:"white"},hovertemplate:"<b>%{x}</b><br>Year: "+t.year+"<br>Percentage: %{text}<extra></extra>"})),[a,o]),x=i.useMemo(()=>[w.accessor("year",{header:"Fiscal Year",cell:e=>e.getValue()}),w.accessor("monday",{header:"Monday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("tuesday",{header:"Tuesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("wednesday",{header:"Wednesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("thursday",{header:"Thursday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),w.accessor("friday",{header:"Friday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`})],[]);return r.jsxs("div",{className:"psc-activity-report space-y-8",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartPSCActivity",initialTableWidth:250,data:Array.isArray(c)?c:[],columns:P,isLoading:v,chartTitle:"PSC Department Activity by Year",xAxisTitle:"Year",yAxisTitle:"Activity Count",traces:T,showTrendLine:!0,showAverageLine:!0,showBarLabels:!0,barLabelPosition:"inside",barLabelInsideAnchor:"middle",barLabelFontColor:"white",excelFileName:"PSCActivityReport.xlsx",chartFileName:"PSCActivityReport.png",excelSheetName:"PSC Activity",showTablePanel:!0,initialSplitPos:70,showPagination:!1,showChartTypeSwitcher:!0,chartType:"bar",chartLayout:{legend:{orientation:"h",y:-.2}}})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartPSCWeekdayActivity",data:Array.isArray(a)?a:[],columns:m,isLoading:u,chartTitle:"PSC Data - Per Action (Weekdays) - Grouped by Year",xAxisTitle:"Year",yAxisTitle:"Percentage",traces:b,showTrendLine:!1,showAverageLine:!1,showBarLabels:!0,barLabelPosition:"inside",barMode:"group",excelFileName:"PSCWeekdayActivityReport.xlsx",chartFileName:"PSCWeekdayActivityReport.png",excelSheetName:"PSC Weekday Activity",showTablePanel:!0,splitterOrientation:"horizontal",initialSplitPos:60,showPagination:!1,showChartTypeSwitcher:!1,disableHighlighting:!0,chartType:"bar",chartLayout:{barmode:"group",yaxis:{tickformat:".0%",range:[0,.3]},legend:{orientation:"h",y:-.2}}})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartPSCWeekdayByDayActivity",data:Array.isArray(a)?a:[],columns:x,isLoading:u,chartTitle:"PSC Data - Per Action (Weekdays) - Grouped by Day",xAxisTitle:"Weekday",yAxisTitle:"Percentage",traces:F,showTrendLine:!1,showAverageLine:!1,showBarLabels:!0,barLabelPosition:"inside",barMode:"group",excelFileName:"PSCWeekdayByDayActivityReport.xlsx",chartFileName:"PSCWeekdayByDayActivityReport.png",excelSheetName:"PSC Weekday By Day Activity",showTablePanel:!0,splitterOrientation:"horizontal",initialSplitPos:60,showPagination:!1,showChartTypeSwitcher:!1,disableHighlighting:!0,chartType:"bar",chartLayout:{barmode:"group",yaxis:{tickformat:".0%",range:[0,.3]},legend:{orientation:"h",y:-.2}}})})]})}const f=W();function H({data:c,isLoading:v}){const{setTitle:g}=N(),[a,C]=i.useState([]),[u,L]=i.useState(!0),o=["rgb(75, 150, 125)","rgb(122, 137, 156)","rgb(95, 163, 95)","rgb(92, 105, 117)","rgb(101, 155, 177)","rgb(72, 209, 204)","rgb(95, 158, 160)","rgb(70, 130, 180)","rgb(100, 149, 237)","rgb(125, 159, 163)","rgb(0, 206, 209)","rgb(32, 178, 170)"];i.useEffect(()=>(S("LUActivityReport",g),()=>g("My Dashboard")),[g]),i.useEffect(()=>{(async()=>{try{const t=await fetch("./data/UniquePermitsAnalysisData/DeptAnnualActivityWeekdayJson.json");if(!t.ok)throw new Error("Failed to fetch weekday data");const n=(await t.json()).filter(l=>l.department==="LU");C(n)}catch(t){console.error("Error fetching weekday data:",t)}finally{L(!1)}})()},[]);const P=i.useMemo(()=>[{header:()=>r.jsx("div",{className:"text-center",children:"Year"}),accessorKey:"year",id:"year",sortingFn:"basic",cell:e=>r.jsx("div",{className:"text-center",children:e.getValue()})},{header:()=>r.jsx("div",{className:"text-center",children:"Activity Count"}),accessorKey:"activity_count",id:"activity_count",sortingFn:"basic",cell:e=>r.jsx("div",{className:"text-center",children:e.getValue().toLocaleString()})}],[]),m=i.useMemo(()=>[f.accessor("year",{header:"Fiscal Year",cell:e=>e.getValue()}),f.accessor("monday",{header:"Monday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("tuesday",{header:"Tuesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("wednesday",{header:"Wednesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("thursday",{header:"Thursday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("friday",{header:"Friday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`})],[]),T=i.useMemo(()=>{if(!c||!Array.isArray(c)||c.length===0)return[];const e=[...c].sort((t,s)=>t.year-s.year);return[{x:e.map(t=>t.year),y:e.map(t=>t.activity_count),type:"bar",name:"LU Activity",marker:{color:o[0]},text:e.map(t=>t.activity_count.toLocaleString()),textposition:"inside",insidetextanchor:"middle",textfont:{color:"white",size:12},hovertemplate:"<b>Year: %{x}</b><br>Activity Count: %{y:,}<extra></extra>"}]},[c,o]),b=i.useMemo(()=>{if(!a||!Array.isArray(a)||a.length===0)return[];const e=[...a].sort((n,l)=>n.year-l.year),t=["monday","tuesday","wednesday","thursday","friday"],s=["Mon","Tue","Wed","Thu","Fri"];return t.map((n,l)=>({x:e.map(y=>y.year),y:e.map(y=>y[n]),type:"bar",name:s[l],marker:{color:o[l%o.length]},text:e.map(y=>`${(y[n]*100).toFixed(1)}%`),textposition:"inside",insidetextanchor:"middle",textangle:-90,textfont:{size:10,color:"white"},hovertemplate:"<b>Year: %{x}</b><br>"+s[l]+": %{text}<extra></extra>"}))},[a,o]),F=i.useMemo(()=>!a||!Array.isArray(a)||a.length===0?[]:[...a].sort((t,s)=>t.year-s.year).map((t,s)=>({x:["Mon","Tue","Wed","Thu","Fri"],y:[t.monday,t.tuesday,t.wednesday,t.thursday,t.friday],type:"bar",name:`${t.year}`,marker:{color:o[s%o.length]},text:[`${(t.monday*100).toFixed(1)}%`,`${(t.tuesday*100).toFixed(1)}%`,`${(t.wednesday*100).toFixed(1)}%`,`${(t.thursday*100).toFixed(1)}%`,`${(t.friday*100).toFixed(1)}%`],textposition:"inside",insidetextanchor:"middle",textangle:-90,textfont:{size:10,color:"white"},hovertemplate:"<b>%{x}</b><br>Year: "+t.year+"<br>Percentage: %{text}<extra></extra>"})),[a,o]),x=i.useMemo(()=>[f.accessor("year",{header:"Fiscal Year",cell:e=>e.getValue()}),f.accessor("monday",{header:"Monday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("tuesday",{header:"Tuesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("wednesday",{header:"Wednesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("thursday",{header:"Thursday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),f.accessor("friday",{header:"Friday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`})],[]);return r.jsxs("div",{className:"lu-activity-report space-y-8",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartLUActivity",initialTableWidth:250,data:Array.isArray(c)?c:[],columns:P,isLoading:v,chartTitle:"LU Department Activity by Year",xAxisTitle:"Year",yAxisTitle:"Activity Count",traces:T,showTrendLine:!0,showAverageLine:!0,showBarLabels:!0,barLabelPosition:"inside",barLabelInsideAnchor:"middle",barLabelFontColor:"white",excelFileName:"LUActivityReport.xlsx",chartFileName:"LUActivityReport.png",excelSheetName:"LU Activity",showTablePanel:!0,initialSplitPos:70,showPagination:!1,showChartTypeSwitcher:!0,chartType:"bar",showLineLabels:!0,chartLayout:{legend:{orientation:"h",y:-.2}}})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartLUWeekdayActivity",data:Array.isArray(a)?a:[],columns:m,isLoading:u,chartTitle:"LU Data - Per Action (Weekdays) - Grouped by Year",xAxisTitle:"Year",yAxisTitle:"Percentage",traces:b,showTrendLine:!1,showAverageLine:!1,showBarLabels:!0,barLabelPosition:"inside",barMode:"group",excelFileName:"LUWeekdayActivityReport.xlsx",chartFileName:"LUWeekdayActivityReport.png",excelSheetName:"LU Weekday Activity",showTablePanel:!0,splitterOrientation:"horizontal",initialSplitPos:60,showPagination:!1,showChartTypeSwitcher:!1,disableHighlighting:!0,disableSelection:!0,chartType:"bar",chartLayout:{barmode:"group",yaxis:{tickformat:".0%",range:[0,.7]},legend:{orientation:"h",y:-.2}}})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartLUWeekdayByDayActivity",data:Array.isArray(a)?a:[],columns:x,isLoading:u,chartTitle:"LU Data - Per Action (Weekdays) - Grouped by Day",xAxisTitle:"Weekday",yAxisTitle:"Percentage",traces:F,showTrendLine:!1,showAverageLine:!1,showBarLabels:!0,barLabelPosition:"inside",barMode:"group",excelFileName:"LUWeekdayByDayActivityReport.xlsx",chartFileName:"LUWeekdayByDayActivityReport.png",excelSheetName:"LU Weekday By Day Activity",showTablePanel:!0,splitterOrientation:"horizontal",initialSplitPos:60,showPagination:!1,showChartTypeSwitcher:!1,disableHighlighting:!0,disableSelection:!0,chartType:"bar",chartLayout:{barmode:"group",yaxis:{tickformat:".0%",range:[0,.7]},legend:{orientation:"h",y:-.2}}})})]})}const A=W();function I({data:c,isLoading:v}){const{setTitle:g}=N(),[a,C]=i.useState([]),[u,L]=i.useState(!0),o=["rgb(168, 65, 27)","rgb(167, 103, 26)","rgb(175, 153, 28)","rgb(93, 173, 12)","rgb(42, 170, 106)","rgb(0, 110, 146)","rgba(39, 94, 150, 0.75)","rgb(138, 43, 226)","rgb(128, 15, 75)","rgb(199, 21, 133)","rgb(220, 20, 60)","rgb(75, 0, 130)"];i.useEffect(()=>(S("PLNCheckActivityReport",g),()=>g("My Dashboard")),[g]),i.useEffect(()=>{(async()=>{try{const t=await fetch("./data/UniquePermitsAnalysisData/DeptAnnualActivityWeekdayJson.json");if(!t.ok)throw new Error("Failed to fetch weekday data");const n=(await t.json()).filter(l=>l.department==="PLN Check");C(n)}catch(t){console.error("Error fetching weekday data:",t)}finally{L(!1)}})()},[]);const P=i.useMemo(()=>[{header:"Year",accessorKey:"year",id:"year",sortingFn:"basic",cell:e=>e.getValue()},{header:"Activity Count",accessorKey:"activity_count",id:"activity_count",sortingFn:"basic",cell:e=>r.jsx("div",{className:"text-center",children:e.getValue().toLocaleString()})}],[]),m=i.useMemo(()=>[A.accessor("year",{header:"Fiscal Year",cell:e=>e.getValue()}),A.accessor("monday",{header:"Monday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("tuesday",{header:"Tuesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("wednesday",{header:"Wednesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("thursday",{header:"Thursday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("friday",{header:"Friday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`})],[]),T=i.useMemo(()=>{if(!c||!Array.isArray(c)||c.length===0)return[];const e=[...c].sort((t,s)=>t.year-s.year);return[{x:e.map(t=>t.year),y:e.map(t=>t.activity_count),type:"bar",name:"PLN Check Activity",marker:{color:o[0]},text:e.map(t=>t.activity_count.toLocaleString()),textposition:"inside",insidetextanchor:"middle",textfont:{color:"white",size:12},hovertemplate:"<b>Year: %{x}</b><br>Activity Count: %{y:,}<extra></extra>"}]},[c,o]),b=i.useMemo(()=>{if(!a||!Array.isArray(a)||a.length===0)return[];const e=[...a].sort((n,l)=>n.year-l.year),t=["monday","tuesday","wednesday","thursday","friday"],s=["Mon","Tue","Wed","Thu","Fri"];return t.map((n,l)=>({x:e.map(y=>y.year),y:e.map(y=>y[n]),type:"bar",name:s[l],marker:{color:o[l%o.length]},text:e.map(y=>`${(y[n]*100).toFixed(1)}%`),textposition:"inside",insidetextanchor:"middle",textangle:-90,textfont:{size:10,color:"white"},hovertemplate:"<b>Year: %{x}</b><br>"+s[l]+": %{text}<extra></extra>"}))},[a,o]),F=i.useMemo(()=>!a||!Array.isArray(a)||a.length===0?[]:[...a].sort((t,s)=>t.year-s.year).map((t,s)=>({x:["Mon","Tue","Wed","Thu","Fri"],y:[t.monday,t.tuesday,t.wednesday,t.thursday,t.friday],type:"bar",name:`${t.year}`,marker:{color:o[s%o.length]},text:[`${(t.monday*100).toFixed(1)}%`,`${(t.tuesday*100).toFixed(1)}%`,`${(t.wednesday*100).toFixed(1)}%`,`${(t.thursday*100).toFixed(1)}%`,`${(t.friday*100).toFixed(1)}%`],textposition:"inside",insidetextanchor:"middle",textangle:-90,textfont:{size:10,color:"white"},hovertemplate:"<b>%{x}</b><br>Year: "+t.year+"<br>Percentage: %{text}<extra></extra>"})),[a,o]),x=i.useMemo(()=>[A.accessor("year",{header:"Fiscal Year",cell:e=>e.getValue()}),A.accessor("monday",{header:"Monday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("tuesday",{header:"Tuesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("wednesday",{header:"Wednesday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("thursday",{header:"Thursday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`}),A.accessor("friday",{header:"Friday",cell:e=>`${(e.getValue()*100).toFixed(1)}%`})],[]);return r.jsxs("div",{className:"pln-check-activity-report space-y-8",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartPLNCheckActivity",initialTableWidth:250,data:Array.isArray(c)?c:[],columns:P,isLoading:v,chartTitle:"PLN Check Department Activity by Year",xAxisTitle:"Year",yAxisTitle:"Activity Count",traces:T,showTrendLine:!0,showAverageLine:!0,showBarLabels:!0,barLabelPosition:"inside",barLabelInsideAnchor:"middle",barLabelFontColor:"white",excelFileName:"PLNCheckActivityReport.xlsx",chartFileName:"PLNCheckActivityReport.png",excelSheetName:"PLN Check Activity",showTablePanel:!0,initialSplitPos:70,showPagination:!1,showChartTypeSwitcher:!0,chartType:"bar",showLineLabels:!0,chartLayout:{legend:{orientation:"h",y:-.2}}})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartPLNCheckWeekdayActivity",data:Array.isArray(a)?a:[],columns:m,isLoading:u,chartTitle:"PLN Check Data - Per Action (Weekdays) - Grouped by Year",xAxisTitle:"Year",yAxisTitle:"Percentage",traces:b,showTrendLine:!1,showAverageLine:!1,showBarLabels:!0,barLabelPosition:"inside",barMode:"group",excelFileName:"PLNCheckWeekdayActivityReport.xlsx",chartFileName:"PLNCheckWeekdayActivityReport.png",excelSheetName:"PLN Check Weekday Activity",showTablePanel:!0,splitterOrientation:"horizontal",initialSplitPos:60,showPagination:!1,showChartTypeSwitcher:!1,disableHighlighting:!0,disableSelection:!0,chartType:"bar",chartLayout:{barmode:"group",yaxis:{tickformat:".0%",range:[0,.3]},legend:{orientation:"h",y:-.2}}})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx(k,{id:"chartPLNCheckWeekdayByDayActivity",data:Array.isArray(a)?a:[],columns:x,isLoading:u,chartTitle:"PLN Check Data - Per Action (Weekdays) - Grouped by Day",xAxisTitle:"Weekday",yAxisTitle:"Percentage",traces:F,showTrendLine:!1,showAverageLine:!1,showBarLabels:!0,barLabelPosition:"inside",barMode:"group",excelFileName:"PLNCheckWeekdayByDayActivityReport.xlsx",chartFileName:"PLNCheckWeekdayByDayActivityReport.png",excelSheetName:"PLN Check Weekday By Day Activity",showTablePanel:!0,splitterOrientation:"horizontal",initialSplitPos:60,showPagination:!1,showChartTypeSwitcher:!1,disableHighlighting:!0,disableSelection:!0,chartType:"bar",chartLayout:{barmode:"group",yaxis:{tickformat:".0%",range:[0,.3]},legend:{orientation:"h",y:-.2}}})})]})}function q(){const{setTitle:c}=N(),{deptType:v}=$(),g=M(),[a,C]=i.useState([]),[u,L]=i.useState(!0),[o,P]=i.useState(null),[m,T]=i.useState(v||"PSC"),[b,F]=i.useState([]),[x,e]=i.useState(!0);i.useEffect(()=>{g(`/deptactivity/${m}`,{replace:!0})},[m,g]),i.useEffect(()=>{v&&["PSC","LU","PLN Check"].includes(v)&&T(v)},[v]),i.useEffect(()=>(c("Department Activity Analysis Dashboard"),()=>c("My Dashboard")),[c]);const t=i.useMemo(()=>{if(!Array.isArray(a)||a.length===0)return[];const d=new Set(a.map(h=>h.year));return Array.from(d).sort((h,p)=>p-h)},[a]);i.useEffect(()=>{(async()=>{L(!0),P(null);try{const h=await fetch("./data/UniquePermitsAnalysisData/DeptAnnualActivityJson.json");if(!h.ok)throw new Error("HTTP error during data fetch.");const p=await h.json();C(p)}catch(h){console.error("Failed to fetch department activity data:",h),P("Failed to load department activity data.")}finally{L(!1)}})()},[]),i.useEffect(()=>{!u&&t.length>0&&F([...t])},[u,t]);const s=i.useCallback((d,h)=>{F(p=>h?[...p,d]:p.filter(j=>j!==d))},[]),n=i.useCallback(d=>{if(!Array.isArray(a))return u||console.error(`Activity data is not an array for department ${d}. Received:`,a),[];if(a.length===0)return[];let h=[...a];return h=h.filter(p=>p.department===d),b.length>0&&(h=h.filter(p=>b.includes(p.year))),h},[a,b,u]),l=i.useMemo(()=>n("PSC"),[n,a,b,u]),y=i.useMemo(()=>n("LU"),[n,a,b]),D=i.useMemo(()=>n("PLN Check"),[n,a,b]);return u?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(V,{className:"animate-spin text-blue-600 w-12 h-12"})}):r.jsxs("div",{className:"dept-activity-dashboard",id:"dept-activity-dashboard",children:[o&&r.jsx("div",{className:"text-red-600 dark:text-red-400 text-center text-lg mb-4",children:o}),r.jsxs("div",{className:"md:flex gap-4",children:[r.jsxs("div",{className:`md:flex-shrink-0 mb-4 md:mb-0 transition-all duration-300 ${x?"md:w-16":"md:w-64"}`,children:[r.jsx("button",{onClick:()=>e(!x),className:"hidden md:flex items-center justify-center w-full p-1.5 mb-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg text-gray-700 dark:text-gray-200",title:x?"Expand Navigation":"Collapse Navigation",children:x?r.jsx(Y,{className:"w-5 h-5"}):r.jsx(R,{className:"w-5 h-5"})}),r.jsxs("ul",{className:`flex-column space-y-1 text-sm font-medium text-gray-500 dark:text-gray-400 ${x?"hidden md:block":""}`,children:[[{type:"PSC",label:"PSC Activity",icon:U},{type:"LU",label:"LU Activity",icon:B},{type:"PLN Check",label:"PLN Check Activity",icon:E}].map(({type:d,label:h,icon:p})=>r.jsxs("li",{className:"relative group",children:[r.jsxs("button",{className:`inline-flex items-center px-3 py-2 rounded-lg w-full ${m===d?"text-white bg-blue-700 dark:bg-blue-600":"hover:text-gray-900 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"}`,onClick:()=>{T(d),g(`/deptactivity/${d}`)},children:[r.jsx(p,{className:`w-4 h-4 ${x?"mx-auto":"me-2"} ${m===d?"text-white":"text-gray-500 dark:text-gray-400"}`}),!x&&h]}),x&&r.jsx("span",{className:"absolute left-full ml-4 top-1/2 -translate-y-1/2 w-auto min-w-max p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10",children:h})]},d)),!x&&r.jsx("li",{className:"p-3 mt-4 border-t border-gray-200 dark:border-gray-700 space-y-4",children:r.jsx(z,{label:"Select Years",options:t.map(d=>({label:String(d),value:d})),selectedValues:b,onChange:s})})]})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[m==="PSC"&&r.jsx(_,{data:l,isLoading:u}),m==="LU"&&r.jsx(H,{data:y,isLoading:u}),m==="PLN Check"&&r.jsx(I,{data:D,isLoading:u})]})]})]})}export{q as default};
